<!-- webkit-test-runner [ SiteIsolationEnabled=true ] -->
<!doctype html>
<html>
<body>
<script>
if (window.testRunner) {
    testRunner.waitUntilDone();
    testRunner.dumpAsText();
}

window.addEventListener("message", function (e) {
    if (e.data !== 'blocked')
        console.log('FAIL: Insecure iframe was NOT blocked');

    if (window.testRunner)
        testRunner.notifyDone();
}, false);

</script>
<p>This test opens a window that loads an insecure iframe.  We should trigger a
mixed content callback and block the request because the main frame in the
window is HTTPS but is displaying insecure content.</p>
<script>
onload = function() {
    window.open("https://127.0.0.1:8443/site-isolation/mixedContent/resources/frame-with-insecure-frame.html");
}
</script>
</body>
</html>
